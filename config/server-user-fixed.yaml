# 0Trust Server Configuration - User's Fixed Config

# Log level configuration
log_level: "INFO"

# Core server settings
server:
  listen_addr: ":8443"
  cert_file: "/config/certs/server.crt"
  key_file: "/config/certs/server.key"
  ca_file: "/config/certs/ca.crt"

# API server settings (for HTTP proxy from Caddy)
api:
  listen_addr: "localhost:9443"

# Caddy reverse proxy settings
caddy:
  admin_api: "http://localhost:2019"
  config_dir: "/config/caddy"
  storage_dir: "/config/caddy/storage"

  # FIXED: Added include fields for access logs to appear
  logging:
    enabled: true
    level: "INFO" # DEBUG, INFO, WARN, ERROR
    format: "json" # json, console, single_field, filter, or custom encoder
    output: "stdout" # stdout, stderr, discard, or file path (e.g., "/var/log/caddy.log")

    # REQUIRED: These fields must be included for access logs to appear
    include:
      - "ts" # Timestamp
      - "request>method" # HTTP method (GET, POST, etc.)
      - "request>uri" # Request URI/path
      - "status" # HTTP status code
      - "duration" # Request duration
      - "size" # Response size
      - "request>host" # Host header
      - "request>remote_ip" # Client IP address

    # Optional: Exclude sensitive data for security
    exclude:
      - "request>headers>Authorization"
      - "request>headers>Cookie"
